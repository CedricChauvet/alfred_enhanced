# ReAct-Light v1 - Configuration pour 7 epochs (overnight training)
# Optimisé pour entraînement long avec early stopping

model: seq2seq_react_light
# ou simplement
exp_name: react_light_v1_7epochs
description: "ReAct-Light training overnight (7 epochs) avec early stopping et LR scheduling"


# Data splits (IMPORTANT - était manquant)
splits: data/splits/oct21.json
# Training parameters
batch: 4                    # ✅ Garder à 4 (stable)
epoch: 7                    # ✅ 7 epochs pour overnight
lr: 0.001                   # ✅ GARDER initial LR

# Learning rate scheduling (NOUVEAU - recommandé pour 7 epochs)
lr_scheduler: "reduce_on_plateau"
lr_patience: 2              # Réduit LR après 2 epochs sans amélioration
lr_factor: 0.5              # LR *= 0.5 quand plateau détecté
lr_min: 0.00001             # LR minimum

# Early stopping (IMPORTANT pour 7 epochs)
early_stop: true            # ✅ ACTIVER early stopping
patience: 3                 # Arrêt si pas d'amélioration pendant 3 epochs

# Checkpoint strategy
save_every_epoch: false     # ✅ Économiser espace disque
keep_best_only: true        # ✅ Garder seulement best_seen et best_unseen

# Regularization (pour éviter overfitting sur 7 epochs)
dropout: 0.1                # ✅ Garder dropout
weight_decay: 0.0001        # ✅ Ajouter weight decay (faible)

# ReAct parameters (garder stables)
use_react: true
use_cot: true
max_subgoals: 5
max_replans: 3
replan_threshold: 0.5

# Loss weights (ajuster légèrement)
loss_action_weight: 1.0     # ✅ GARDER
loss_cot_weight: 0.5        # ✅ GARDER  
loss_react_thought_weight: 0.3   # ✅ GARDER
loss_react_replan_weight: 0.3    # ✅ GARDER

# Data
data: data/json_feat_2.1.0

# Optimization
optimizer: adamw            # ✅ AdamW meilleur que Adam pour long training
grad_clip: 5.0             # ✅ Gradient clipping
accumulate_grad_batches: 1  # Pas d'accumulation (batch=4 OK)

# GPU
gpu: true
num_workers: 4
pin_memory: true

# Logging
log_every: 100              # Log toutes les 100 batches
eval_every_epoch: true      # ✅ Évaluer à chaque epoch
save_best_model: true

# Experiment tracking
use_tensorboard: true       # Pour suivre la progression
experiment_name: react_light_v1_7epochs

# Notes
notes: |
  ReAct-Light training overnight (7 epochs)
  - Early stopping avec patience=3
  - LR scheduling avec reduce_on_plateau
  - Weight decay pour régularisation
  - Target: 30-40% success rate